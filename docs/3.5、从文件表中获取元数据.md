# 1、修改filemeta的逻辑

filestore-server/meta/filemeta.go

```golang
// 导入mysql连接
import (
	mydb "filestore-server/db"
)

// UpdateFileMetaDB : 新增/更新文件元信息到mysql中
func UpdateFileMetaDB(fmeta FileMeta) bool {
	return mydb.OnFileUploadFinished(
		fmeta.FileSha1, fmeta.FileName, fmeta.FileSize, fmeta.Location)
}
```

# 2、修改handler逻辑

filestore-server/handler/handler.go

```golang
// FileUploadHandler函数中逻辑调整

meta.UpdateFileMeta(fileMeta)
// 调整为
meta.UpdateFileMetaDB(fileMeta)
```
# 3、遇到空指针问题

Go invalid memory address or nil pointer dereference错误

```golang
db, _ := sql.Open("mysql", "root:123456@tcp(127.0.0.1:3306)/fileserver?charset=utf8")
// 修改为
db, _ = sql.Open("mysql", "root:123456@tcp(127.0.0.1:3306)/fileserver?charset=utf8")
// 具体原因为，对已经声明的变量进行赋值操作，不用加:=直接使用=即可
```